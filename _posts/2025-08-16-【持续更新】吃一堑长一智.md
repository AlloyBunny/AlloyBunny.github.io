---
layout: post
title: 【持续更新】吃一堑长一智
tags: [经验]
---

 为防止记性不好的自己重复踩一样的坑，本文中记载一些我踩过的，且以后还可能再次遇到的坑

---

### pytorch的安装

即使`requirements.txt`里有给定pytorch版本，也千万不要直接`pip install requirements.txt`，一定要去官网找**适合自己GPU的版本**。

1. 用`nvidia-smi`查看CUDA内核版本，第一行会写CUDA Version，比如12.2
2. 去[pytorch官网](https://pytorch.org/get-started/previous-versions/)找对应版本下载，cu版本**必须选等于nvidia-smi里的或者小于但最接近的那个**，比如12.2就找cu122，如果没有就找cu121的

---

### 4090跑多卡必须加这两句

```bash
export NCCL_P2P_DISABLE=1
export NCCL_IB_DISABLE=1
```

作用：解决 4090 在多卡通信中的兼容性问题
