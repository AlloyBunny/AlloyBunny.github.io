---
layout: post
title: linux服务器配置手册
tags: [手册]
---

1. 添加一些~/.bashrc的配置，添加完后运行. ~/.bashrc立刻生效

   ```bash
   # clash相关
   export PATH=$PATH:/data/zhaiyuxuan/clash
   alias set_proxy="export http_proxy=http://127.0.0.1:7888; export https_proxy=http://127.0.0.1:7888"
   alias unset_proxy="unset http_proxy; unset https_proxy"
   export CLASH_CONFIG_FILE="$HOME/.config/clash/config.yml" # 设置配置文件，使得【clash】命令能指向正确的端口
   
   # 临时文件迁移
   export TMP_FILES_ROOT="/data/zhaiyuxuan/.tmp"
   export TMPDIR="$TMP_FILES_ROOT/pip_temp"
   export PIP_CACHE_DIR="$TMP_FILES_ROOT/pip_cache"
   export CONDA_TEMP="$TMP_FILES_ROOT/conda_temp"
   mkdir -p $TMPDIR $PIP_CACHE_DIR $CONDA_TEMP
   
   # 快捷指定GPU
   function gpu() {
       if [ "$1" = "all" ]; then
           unset CUDA_VISIBLE_DEVICES
           echo "Set CUDA_VISIBLE_DEVICES=all (unset, using all available GPUs)"
       else
           export CUDA_VISIBLE_DEVICES="$1"
           echo "Set CUDA_VISIBLE_DEVICES=$1"
       fi
   }
   ```

2. 配置.condarc

   ```ini
   channels:
     # 优先使用清华源 (常用的可靠国内镜像源，通常速度最快)
     - https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/
     - https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/
     - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
   
     # PyTorch 官方源和 NVIDIA 官方源 (作为备用，如果国内源没有所需的包，或者版本不对，会从这里找)
     - https://conda.anaconda.org/pytorch
     - https://conda.anaconda.org/nvidia
   
     # 默认源 (放在最后作为补充)
     - defaults
   
   show_channel_urls: true
   ssl_verify: true
   envs_dirs:
     - /data/zhaiyuxuan/conda_envs
   ```

3. 配置pip的默认源

   ```
   # 先输入以下命令，会显示设置成功并显示写入的文件路径。
   pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
   
   # 然后点开这个路径，粘贴以下文本
   [global]
   index-url = https://pypi.tuna.tsinghua.edu.cn/simple
   extra-index-url = https://mirrors.aliyun.com/pypi/simple
   trusted-host = 
     pypi.tuna.tsinghua.edu.cn
     mirrors.aliyun.com
   ```

4. 下载和配置clash

   ```
   【参考】https://zhuanlan.zhihu.com/p/693754050
   打开/data/zhaiyuxuan/clash，运行以下命令下载：
   wget https://github.com/doreamon-design/clash/releases/download/v2.0.24/clash_2.0.24_linux_amd64.tar.gz
   然后tar -xzvf clash_2.0.24_linux_amd64.tar.gz解压
   如果clash -v能输出版本号，就说明安装好了
   在windows电脑上取出对应的.yml文件，放到$HOME/.config/clash/config.yml中，记得改端口号，改成和set_proxy的一样。
   ```

5. 配置SSH密钥对

   ```
   1.配置本地的公钥、私钥（如果.ssh已经有了就不用了），在本地cmd输入
       ssh-keygen -t rsa -b 4096
   2.复制本地的公钥，在本地cmd输入
       cat ~/.ssh/id_rsa.pub
   3.把公钥粘贴到远程服务器，在远程服务器的~/.ssh/authorized_keys中粘贴公钥
   4.在VS Code中配置SSH连接：Ctrl+Shift+P，输入Remote-SSH: Open Configuration File... 按下述格式进行配置，然后重启即可
       Host your_server_alias
           HostName your_server_ip
           User your_user_name
           IdentityFile ~/.ssh/id_rsa
   ```
